# –ö–∞—Å—Ç–æ–º–Ω—ñ –ï–º–æ–¥–∂—ñ —Ç–∞ –°—Ç—ñ–∫–µ—Ä–∏ - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ—è—Å–Ω—é—î, —è–∫ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ –≤–ª–∞—Å–Ω—ñ –ø–∞–∫–∏ –µ–º–æ–¥–∂—ñ —Ç–∞ —Å—Ç—ñ–∫–µ—Ä—ñ–≤ –¥–æ WorldMates Messenger —á–µ—Ä–µ–∑ WoWonder API.

## üìã –ó–º—ñ—Å—Ç

- [–û–≥–ª—è–¥](#–æ–≥–ª—è–¥)
- [–ï–º–æ–¥–∂—ñ](#–µ–º–æ–¥–∂—ñ)
  - [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–¥–∞–Ω–∏—Ö-–µ–º–æ–¥–∂—ñ)
  - [API Endpoints](#api-endpoints-–µ–º–æ–¥–∂—ñ)
  - [–ü—Ä–∏–∫–ª–∞–¥–∏](#–ø—Ä–∏–∫–ª–∞–¥–∏-–µ–º–æ–¥–∂—ñ)
- [–°—Ç—ñ–∫–µ—Ä–∏](#—Å—Ç—ñ–∫–µ—Ä–∏)
  - [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–¥–∞–Ω–∏—Ö-—Å—Ç—ñ–∫–µ—Ä–∏)
  - [API Endpoints](#api-endpoints-—Å—Ç—ñ–∫–µ—Ä–∏)
  - [–ü—Ä–∏–∫–ª–∞–¥–∏](#–ø—Ä–∏–∫–ª–∞–¥–∏-—Å—Ç—ñ–∫–µ—Ä–∏)
- [–§–æ—Ä–º–∞—Ç –∑–æ–±—Ä–∞–∂–µ–Ω—å](#—Ñ–æ—Ä–º–∞—Ç-–∑–æ–±—Ä–∞–∂–µ–Ω—å)
- [–û–±–º–µ–∂–µ–Ω–Ω—è](#–æ–±–º–µ–∂–µ–Ω–Ω—è)

---

## –û–≥–ª—è–¥

WorldMates Messenger –ø—ñ–¥—Ç—Ä–∏–º—É—î:
- ‚úÖ **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –ø–∞–∫–∏** - –≤–±—É–¥–æ–≤–∞–Ω—ñ –µ–º–æ–¥–∂—ñ (400+) —Ç–∞ —Å—Ç—ñ–∫–µ—Ä–∏ (32)
- ‚úÖ **–ö–∞—Å—Ç–æ–º–Ω—ñ –ø–∞–∫–∏** - –≤–ª–∞—Å–Ω—ñ –µ–º–æ–¥–∂—ñ —Ç–∞ —Å—Ç—ñ–∫–µ—Ä–∏ —á–µ—Ä–µ–∑ API
- ‚úÖ **–ú–Ω–æ–∂–∏–Ω–Ω—ñ –ø–∞–∫–∏** - –º–æ–∂–Ω–∞ –∞–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –ø–∞–∫—ñ–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ
- ‚úÖ **–ö–µ—à—É–≤–∞–Ω–Ω—è** - –ø–∞–∫–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –¥–æ—Å—Ç—É–ø—É

---

## –ï–º–æ–¥–∂—ñ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö –µ–º–æ–¥–∂—ñ

#### EmojiPack (–ü–∞–∫ –µ–º–æ–¥–∂—ñ)
```json
{
  "id": 1,
  "name": "–ú–æ—ó –µ–º–æ–¥–∂—ñ",
  "description": "–í–ª–∞—Å–Ω–∏–π –ø–∞–∫ —Å–º–∞–π–ª–∏–∫—ñ–≤",
  "icon_url": "https://example.com/icon.png",
  "author": "–ú–æ—î —ñ–º'—è",
  "emojis": [...],
  "is_active": true,
  "created_at": "2024-01-01 12:00:00",
  "updated_at": "2024-01-01 12:00:00"
}
```

#### CustomEmoji (–ö–∞—Å—Ç–æ–º–Ω–∏–π –µ–º–æ–¥–∂—ñ)
```json
{
  "id": 1,
  "code": ":custom_smile:",
  "url": "https://example.com/emoji/smile.png",
  "pack_id": 1,
  "name": "–£—Å–º—ñ—Ö–Ω–µ–Ω–∏–π",
  "keywords": ["smile", "happy", "joy"],
  "created_at": "2024-01-01 12:00:00"
}
```

### API Endpoints –µ–º–æ–¥–∂—ñ

#### 1. –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –ø–∞–∫—ñ–≤
```http
GET /api/v2/?type=get_emoji_packs&access_token={TOKEN}
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "api_status": 200,
  "packs": [
    {
      "id": 1,
      "name": "–ú–æ—ó –µ–º–æ–¥–∂—ñ",
      "description": "–í–ª–∞—Å–Ω–∏–π –ø–∞–∫",
      "is_active": true,
      ...
    }
  ]
}
```

#### 2. –û—Ç—Ä–∏–º–∞—Ç–∏ –µ–º–æ–¥–∂—ñ –∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–∞–∫—É
```http
GET /api/v2/?type=get_emoji_pack&pack_id={PACK_ID}&access_token={TOKEN}
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "api_status": 200,
  "pack": {
    "id": 1,
    "name": "–ú–æ—ó –µ–º–æ–¥–∂—ñ",
    ...
  },
  "emojis": [
    {
      "id": 1,
      "code": ":smile:",
      "url": "https://example.com/smile.png",
      ...
    }
  ]
}
```

#### 3. –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –ø–∞–∫
```http
POST /api/v2/?type=activate_emoji_pack&access_token={TOKEN}
Content-Type: application/x-www-form-urlencoded

pack_id=1
```

#### 4. –î–µ–∞–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –ø–∞–∫
```http
POST /api/v2/?type=deactivate_emoji_pack&access_token={TOKEN}
Content-Type: application/x-www-form-urlencoded

pack_id=1
```

### –ü—Ä–∏–∫–ª–∞–¥–∏ –µ–º–æ–¥–∂—ñ

#### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞–∫—É –µ–º–æ–¥–∂—ñ (Backend)

```php
// database structure
CREATE TABLE emoji_packs (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255),
    description TEXT,
    icon_url VARCHAR(500),
    author VARCHAR(255),
    is_active BOOLEAN DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE custom_emojis (
    id INT PRIMARY KEY AUTO_INCREMENT,
    pack_id INT,
    code VARCHAR(100),
    url VARCHAR(500),
    name VARCHAR(255),
    keywords JSON,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (pack_id) REFERENCES emoji_packs(id) ON DELETE CASCADE
);
```

---

## –°—Ç—ñ–∫–µ—Ä–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö —Å—Ç—ñ–∫–µ—Ä–∏

#### StickerPack (–ü–∞–∫ —Å—Ç—ñ–∫–µ—Ä—ñ–≤)
```json
{
  "id": 1,
  "name": "–ú–æ—ó —Å—Ç—ñ–∫–µ—Ä–∏",
  "description": "–í–ª–∞—Å–Ω–∏–π –ø–∞–∫ —Å—Ç—ñ–∫–µ—Ä—ñ–≤",
  "icon_url": "https://example.com/pack_icon.png",
  "thumbnail_url": "https://example.com/pack_thumb.png",
  "author": "–ú–æ—î —ñ–º'—è",
  "stickers": [...],
  "sticker_count": 24,
  "is_active": true,
  "is_animated": false,
  "created_at": "2024-01-01 12:00:00",
  "updated_at": "2024-01-01 12:00:00"
}
```

#### Sticker (–°—Ç—ñ–∫–µ—Ä)
```json
{
  "id": 1,
  "pack_id": 1,
  "file_url": "https://example.com/stickers/001.png",
  "thumbnail_url": "https://example.com/stickers/thumbs/001.png",
  "emoji": "üòä",
  "keywords": ["smile", "happy"],
  "width": 512,
  "height": 512,
  "file_size": 45000,
  "format": "webp"
}
```

### API Endpoints —Å—Ç—ñ–∫–µ—Ä–∏

#### 1. –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –ø–∞–∫—ñ–≤ —Å—Ç—ñ–∫–µ—Ä—ñ–≤
```http
GET /api/v2/?type=get_sticker_packs&access_token={TOKEN}
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "api_status": 200,
  "packs": [
    {
      "id": 1,
      "name": "–ú–æ—ó —Å—Ç—ñ–∫–µ—Ä–∏",
      "sticker_count": 24,
      "is_active": true,
      ...
    }
  ]
}
```

#### 2. –û—Ç—Ä–∏–º–∞—Ç–∏ —Å—Ç—ñ–∫–µ—Ä–∏ –∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–∞–∫—É
```http
GET /api/v2/?type=get_sticker_pack&pack_id={PACK_ID}&access_token={TOKEN}
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "api_status": 200,
  "pack": {
    "id": 1,
    "name": "–ú–æ—ó —Å—Ç—ñ–∫–µ—Ä–∏",
    ...
  },
  "stickers": [
    {
      "id": 1,
      "file_url": "https://example.com/sticker1.webp",
      "emoji": "üòä",
      ...
    }
  ]
}
```

#### 3. –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –ø–∞–∫ —Å—Ç—ñ–∫–µ—Ä—ñ–≤
```http
POST /api/v2/?type=activate_sticker_pack&access_token={TOKEN}
Content-Type: application/x-www-form-urlencoded

pack_id=1
```

#### 4. –î–µ–∞–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –ø–∞–∫ —Å—Ç—ñ–∫–µ—Ä—ñ–≤
```http
POST /api/v2/?type=deactivate_sticker_pack&access_token={TOKEN}
Content-Type: application/x-www-form-urlencoded

pack_id=1
```

#### 5. –ù–∞–¥—ñ—Å–ª–∞—Ç–∏ —Å—Ç—ñ–∫–µ—Ä
```http
POST /api/v2/?type=send_sticker&access_token={TOKEN}
Content-Type: application/x-www-form-urlencoded

user_id=123           # –î–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ —á–∞—Ç—É
group_id=456          # –î–ª—è –≥—Ä—É–ø–æ–≤–æ–≥–æ —á–∞—Ç—É
sticker_id=789
message_hash_id=unique-hash-id
```

### –ü—Ä–∏–∫–ª–∞–¥–∏ —Å—Ç—ñ–∫–µ—Ä–∏

#### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞–∫—É —Å—Ç—ñ–∫–µ—Ä—ñ–≤ (Backend)

```php
// database structure
CREATE TABLE sticker_packs (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255),
    description TEXT,
    icon_url VARCHAR(500),
    thumbnail_url VARCHAR(500),
    author VARCHAR(255),
    sticker_count INT DEFAULT 0,
    is_active BOOLEAN DEFAULT 0,
    is_animated BOOLEAN DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE stickers (
    id INT PRIMARY KEY AUTO_INCREMENT,
    pack_id INT,
    file_url VARCHAR(500),
    thumbnail_url VARCHAR(500),
    emoji VARCHAR(10),
    keywords JSON,
    width INT,
    height INT,
    file_size INT,
    format VARCHAR(10),
    FOREIGN KEY (pack_id) REFERENCES sticker_packs(id) ON DELETE CASCADE
);
```

---

## –§–æ—Ä–º–∞—Ç –∑–æ–±—Ä–∞–∂–µ–Ω—å

### –ï–º–æ–¥–∂—ñ
- **–†–æ–∑–º—ñ—Ä**: 32x32px –∞–±–æ 64x64px (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
- **–§–æ—Ä–º–∞—Ç**: PNG, SVG
- **–†–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É**: –¥–æ 50 KB
- **–§–æ–Ω**: –ü—Ä–æ–∑–æ—Ä–∏–π

### –°—Ç—ñ–∫–µ—Ä–∏
- **–†–æ–∑–º—ñ—Ä**: 512x512px (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
- **–§–æ—Ä–º–∞—Ç**: WebP (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ), PNG
- **–†–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É**: –¥–æ 500 KB
- **–§–æ–Ω**: –ü—Ä–æ–∑–æ—Ä–∏–π –∞–±–æ –±—ñ–ª–∏–π

---

## –û–±–º–µ–∂–µ–Ω–Ω—è

### –ö—ñ–ª—å–∫—ñ—Å—Ç—å
- **–ü–∞–∫—ñ–≤ –µ–º–æ–¥–∂—ñ**: –ù–µ–æ–±–º–µ–∂–µ–Ω–æ
- **–ü–∞–∫—ñ–≤ —Å—Ç—ñ–∫–µ—Ä—ñ–≤**: –ù–µ–æ–±–º–µ–∂–µ–Ω–æ
- **–ï–º–æ–¥–∂—ñ –≤ –ø–∞–∫—É**: –¥–æ 200
- **–°—Ç—ñ–∫–µ—Ä—ñ–≤ –≤ –ø–∞–∫—É**: –¥–æ 100

### –ê–∫—Ç–∏–≤–Ω—ñ –ø–∞–∫–∏
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –∞–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –¥–æ **10 –ø–∞–∫—ñ–≤ –µ–º–æ–¥–∂—ñ** –æ–¥–Ω–æ—á–∞—Å–Ω–æ
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –∞–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –¥–æ **10 –ø–∞–∫—ñ–≤ —Å—Ç—ñ–∫–µ—Ä—ñ–≤** –æ–¥–Ω–æ—á–∞—Å–Ω–æ
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –ø–∞–∫ –∑–∞–≤–∂–¥–∏ –∞–∫—Ç–∏–≤–Ω–∏–π

### –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
- –ü–∞–∫–∏ –∫–µ—à—É—é—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —á–µ—Ä–µ–∑ Coil
- –ü—Ä–∏ –∑–º—ñ–Ω—ñ –∞–∫—Ç–∏–≤–Ω–∏—Ö –ø–∞–∫—ñ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è UI

---

## –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –¥–æ–¥–∞—Ç–∫—É

### –ï–º–æ–¥–∂—ñ

```kotlin
// –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–∞–∫—ñ–≤ –µ–º–æ–¥–∂—ñ
val emojiRepository = EmojiRepository.getInstance(context)
emojiRepository.fetchEmojiPacks()

// –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –ø–∞–∫—É
emojiRepository.activateEmojiPack(packId = 1)

// –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω–∏—Ö –µ–º–æ–¥–∂—ñ
val activeEmojis = emojiRepository.customEmojis.collectAsState()
```

### –°—Ç—ñ–∫–µ—Ä–∏

```kotlin
// –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–∞–∫—ñ–≤ —Å—Ç—ñ–∫–µ—Ä—ñ–≤
val stickerRepository = StickerRepository.getInstance(context)
stickerRepository.fetchStickerPacks()

// –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –ø–∞–∫—É
stickerRepository.activateStickerPack(packId = 1)

// –ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Å—Ç—ñ–∫–µ—Ä–∞
viewModel.sendSticker(stickerId = 789)
```

---

## –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ —É –≤–∞—Å –≤–∏–Ω–∏–∫–ª–∏ –ø–∏—Ç–∞–Ω–Ω—è –∞–±–æ –ø—Ä–æ–±–ª–µ–º–∏ –∑ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è–º –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –ø–∞–∫—ñ–≤:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ñ–æ—Ä–º–∞—Ç JSON –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π API
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ URLs –∑–æ–±—Ä–∞–∂–µ–Ω—å –¥–æ—Å—Ç—É–ø–Ω—ñ
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏: `adb logcat | grep -i emoji` –∞–±–æ `adb logcat | grep -i sticker`
4. –û—á–∏—Å—Ç—ñ—Ç—å –∫–µ—à –¥–æ–¥–∞—Ç–∫—É, —è–∫—â–æ –ø–∞–∫–∏ –Ω–µ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è

---

**–í–µ—Ä—Å—ñ—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó**: 1.0
**–î–∞—Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è**: 2024-12-25
