# üé® WorldMates Messenger - –°–∏—Å—Ç–µ–º–∞ –¢–µ–º

## –û–±–∑–æ—Ä

WorldMates Messenger —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–æ—â–Ω—É—é –∏ –≥–∏–±–∫—É—é —Å–∏—Å—Ç–µ–º—É —Ç–µ–º —Å **10 –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ —Ç–µ–º–∞–º–∏**, –≤–∫–ª—é—á–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫—É **Material You** (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ü–≤–µ—Ç–∞ –∏–∑ –æ–±–æ–µ–≤ –¥–ª—è Android 12+).

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **10 –∫—Ä–∞—Å–∏–≤—ã—Ö —Ç–µ–º**: Classic Blue, Deep Ocean, Sunset Dreams, Forest Green, Purple Dream, Rose Gold, Monochrome, Nord Frost, Dracula Night, Material You
- **Material You –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ü–≤–µ—Ç–∞ –∏–∑ –æ–±–æ–µ–≤ —Å–∏—Å—Ç–µ–º—ã (Android 12+)
- **–°–≤–µ—Ç–ª–∞—è/–¢–µ–º–Ω–∞—è —Ç–µ–º–∞**: –ö–∞–∂–¥–∞—è —Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–∞ —Ä–µ–∂–∏–º–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–π —Ç–µ–º–µ**: –û–ø—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–º–µ–Ω—ã —Ç–µ–º—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫**: –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ DataStore
- **–ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏**: –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Ç–µ–º–∞–º–∏
- **–ö—Ä–∞—Å–∏–≤—ã–π UI**: –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤—ã–±–æ—Ä–∞ —Ç–µ–º —Å –ø—Ä–µ–≤—å—é —Ü–≤–µ—Ç–æ–≤

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
app/src/main/java/com/worldmates/messenger/ui/theme/
‚îú‚îÄ‚îÄ Theme.kt                    # –ì–ª–∞–≤–Ω–∞—è —Ç–µ–º–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ Colors.kt                   # –ë–∞–∑–æ–≤—ã–µ —Ü–≤–µ—Ç–∞
‚îú‚îÄ‚îÄ ThemeVariant.kt            # –í–∞—Ä–∏–∞–Ω—Ç—ã —Ç–µ–º –∏ –ø–∞–ª–∏—Ç—Ä—ã
‚îú‚îÄ‚îÄ ThemeManager.kt            # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Ç–µ–º—ã
‚îú‚îÄ‚îÄ ThemeRepository.kt         # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ DataStore
‚îú‚îÄ‚îÄ ThemeSettingsScreen.kt     # UI —ç–∫—Ä–∞–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Ç–µ–º
‚îú‚îÄ‚îÄ Typography.kt              # –¢–∏–ø–æ–≥—Ä–∞—Ñ–∏—è
‚îî‚îÄ‚îÄ Shapes.kt                  # –§–æ—Ä–º—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤
```

## üé® –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ–º—ã

### 1. Classic Blue üíô
–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—è—è —Ç–µ–º–∞ –≤ —Å—Ç–∏–ª–µ Messenger
- Primary: `#0084FF`
- –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –ø–æ–∫–ª–æ–Ω–Ω–∏–∫–æ–≤ Facebook Messenger

### 2. Deep Ocean üåä
–ì–ª—É–±–æ–∫–∏–µ –æ–∫–µ–∞–Ω—Å–∫–∏–µ –æ—Ç—Ç–µ–Ω–∫–∏ —Å–∏–Ω–µ–≥–æ –∏ –±–∏—Ä—é–∑–æ–≤–æ–≥–æ
- Primary: `#006BA6`
- –°–ø–æ–∫–æ–π–Ω—ã–µ, –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–æ–Ω–∞

### 3. Sunset Dreams üåÖ
–¢–µ–ø–ª—ã–µ –æ—Ä–∞–Ω–∂–µ–≤–æ-—Ä–æ–∑–æ–≤—ã–µ —Ç–æ–Ω–∞ –∑–∞–∫–∞—Ç–∞
- Primary: `#FF6B35`
- –Ø—Ä–∫–∞—è –∏ —ç–Ω–µ—Ä–≥–∏—á–Ω–∞—è

### 4. Forest Green üå≤
–ü—Ä–∏—Ä–æ–¥–Ω—ã–µ –∑–µ–ª–µ–Ω—ã–µ –∏ –∏–∑—É–º—Ä—É–¥–Ω—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏
- Primary: `#2E7D32`
- –£—Å–ø–æ–∫–∞–∏–≤–∞—é—â–∞—è –ø—Ä–∏—Ä–æ–¥–Ω–∞—è –ø–∞–ª–∏—Ç—Ä–∞

### 5. Purple Dream üíú
–≠–ª–µ–≥–∞–Ω—Ç–Ω—ã–µ —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–µ –∏ —Å–∏—Ä–µ–Ω–µ–≤—ã–µ —Ç–æ–Ω–∞
- Primary: `#6A1B9A`
- –†–æ—Å–∫–æ—à–Ω–∞—è –∏ –∏–∑—ã—Å–∫–∞–Ω–Ω–∞—è

### 6. Rose Gold üåπ
–£—Ç–æ–Ω—á–µ–Ω–Ω–æ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ —Ä–æ–∑–æ–≤–æ–≥–æ –∏ –∑–æ–ª–æ—Ç–æ–≥–æ
- Primary: `#E91E63`
- –≠–ª–µ–≥–∞–Ω—Ç–Ω–∞—è –∏ —Å—Ç–∏–ª—å–Ω–∞—è

### 7. Monochrome ‚ö´
–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è —á–µ—Ä–Ω–æ-–±–µ–ª–∞—è —Ç–µ–º–∞
- Primary: `#212121`
- –°—Ç—Ä–æ–≥–∏–π –º–∏–Ω–∏–º–∞–ª–∏–∑–º

### 8. Nord Frost ‚ùÑÔ∏è
–•–æ–ª–æ–¥–Ω—ã–µ —Å–µ–≤–µ—Ä–Ω—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏ Nord –ø–∞–ª–∏—Ç—Ä—ã
- Primary: `#5E81AC`
- –°–ø–æ–∫–æ–π–Ω–∞—è —Å–∫–∞–Ω–¥–∏–Ω–∞–≤—Å–∫–∞—è —ç—Å—Ç–µ—Ç–∏–∫–∞

### 9. Dracula Night ü¶á
–¢–µ–º–Ω–∞—è —Ç–µ–º–∞ —Å —è—Ä–∫–∏–º–∏ –∞–∫—Ü–µ–Ω—Ç–∞–º–∏
- Primary: `#BD93F9`
- –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –Ω–æ—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 10. Material You üé®
–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ü–≤–µ—Ç–∞ –∏–∑ –æ–±–æ–µ–≤ (Android 12+)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ü–≤–µ—Ç–∞ –∏–∑ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –æ–±–æ–µ–≤
- –£–Ω–∏–∫–∞–ª—å–Ω–∞—è –ø–∞–ª–∏—Ç—Ä–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–í –ª—é–±–æ–π Activity –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `WorldMatesThemedApp`:

```kotlin
class YourActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ ThemeManager –æ–¥–∏–Ω —Ä–∞–∑
        ThemeManager.initialize(this)

        setContent {
            WorldMatesThemedApp {
                // –í–∞—à –∫–æ–Ω—Ç–µ–Ω—Ç –∑–¥–µ—Å—å
                YourScreen()
            }
        }
    }
}
```

### –î–æ—Å—Ç—É–ø –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º —Ç–µ–º—ã

```kotlin
@Composable
fun YourScreen() {
    val themeState = rememberThemeState()
    val themeViewModel = rememberThemeViewModel()

    // –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π –≤–∞—Ä–∏–∞–Ω—Ç —Ç–µ–º—ã
    val currentTheme = themeState.variant

    // –ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–º—É
    Button(onClick = {
        themeViewModel.setThemeVariant(ThemeVariant.SUNSET)
    }) {
        Text("–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Sunset —Ç–µ–º—É")
    }

    // –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º–Ω—É—é —Ç–µ–º—É
    Switch(
        checked = themeState.isDark,
        onCheckedChange = { themeViewModel.toggleDarkTheme() }
    )
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–º —Ü–≤–µ—Ç–∞–º –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞:

```kotlin
@Composable
fun MessageBubble() {
    val extendedColors = WMColors.extendedColors

    Box(
        modifier = Modifier.background(
            color = extendedColors.messageBubbleOwn
        )
    ) {
        Text(
            text = "–ú–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ",
            color = MaterialTheme.colorScheme.onPrimary
        )
    }
}
```

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–º—ã

```kotlin
class SettingsViewModel : ViewModel() {
    private val themeViewModel = ThemeManager.getViewModel(context)

    fun changeTheme(variant: ThemeVariant) {
        themeViewModel.setThemeVariant(variant)
    }

    fun enableMaterialYou() {
        themeViewModel.setDynamicColor(true)
    }

    fun followSystemTheme(enabled: Boolean) {
        themeViewModel.setSystemTheme(enabled)
    }
}
```

## üéØ API Reference

### ThemeVariant (enum)

–í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ç–µ–º:

```kotlin
enum class ThemeVariant {
    CLASSIC,      // –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—è—è
    OCEAN,        // –û–∫–µ–∞–Ω
    SUNSET,       // –ó–∞–∫–∞—Ç
    FOREST,       // –õ–µ—Å
    PURPLE,       // –§–∏–æ–ª–µ—Ç–æ–≤–∞—è
    ROSE_GOLD,    // –†–æ–∑–æ–≤–æ–µ –∑–æ–ª–æ—Ç–æ
    MONOCHROME,   // –ú–æ–Ω–æ—Ö—Ä–æ–º–Ω–∞—è
    NORD,         // Nord
    DRACULA,      // Dracula
    MATERIAL_YOU  // Material You
}
```

### ThemeState (data class)

```kotlin
data class ThemeState(
    val variant: ThemeVariant,           // –¢–µ–∫—É—â–∏–π –≤–∞—Ä–∏–∞–Ω—Ç —Ç–µ–º—ã
    val isDark: Boolean,                 // –¢–µ–º–Ω—ã–π —Ä–µ–∂–∏–º
    val useDynamicColor: Boolean,        // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Material You
    val useSystemTheme: Boolean          // –°–ª–µ–¥–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω–æ–π —Ç–µ–º–µ
)
```

### ThemeViewModel

```kotlin
class ThemeViewModel {
    val themeState: StateFlow<ThemeState>

    fun setThemeVariant(variant: ThemeVariant)
    fun toggleDarkTheme()
    fun setDarkTheme(dark: Boolean)
    fun toggleDynamicColor()
    fun setDynamicColor(enabled: Boolean)
    fun toggleSystemTheme()
    fun setSystemTheme(enabled: Boolean)
    fun resetToDefaults()
    fun isDynamicColorAvailable(): Boolean
}
```

### ExtendedColors

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞:

```kotlin
data class ExtendedColors(
    val messageBubbleOwn: Color,         // –¶–≤–µ—Ç —Å–≤–æ–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
    val messageBubbleOther: Color,       // –¶–≤–µ—Ç —á—É–∂–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
    val messageBubbleOwnDark: Color,
    val messageBubbleOtherDark: Color,
    val onlineGreen: Color,              // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ–Ω–ª–∞–π–Ω
    val awayYellow: Color,               // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ—Ç–æ—à–µ–ª
    val busyRed: Color,                  // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–Ω—è—Ç
    val offlineGray: Color,              // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ—Ñ—Ñ–ª–∞–π–Ω
    val unreadBadge: Color,              // –ó–Ω–∞—á–æ–∫ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
    val typingIndicator: Color,          // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—á–∞—Ç–∞–µ—Ç
    val searchBarBackground: Color       // –§–æ–Ω –ø–æ–∏—Å–∫–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏
)
```

## üõ†Ô∏è –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Ç–µ–º—ã

1. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –≤ `ThemeVariant` enum:

```kotlin
enum class ThemeVariant {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
    CUSTOM_THEME(
        displayName = "My Custom Theme",
        emoji = "üî•",
        description = "–û–ø–∏—Å–∞–Ω–∏–µ –º–æ–µ–π —Ç–µ–º—ã"
    )
}
```

2. –î–æ–±–∞–≤—å—Ç–µ –ø–∞–ª–∏—Ç—Ä—É –≤ —Ñ—É–Ω–∫—Ü–∏—é `getPalette()`:

```kotlin
fun ThemeVariant.getPalette(): ThemePalette {
    return when (this) {
        // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∞–ª–∏—Ç—Ä—ã
        ThemeVariant.CUSTOM_THEME -> ThemePalette(
            primary = Color(0xFFYOUR_COLOR),
            primaryDark = Color(0xFFYOUR_COLOR),
            primaryLight = Color(0xFFYOUR_COLOR),
            secondary = Color(0xFFYOUR_COLOR),
            secondaryDark = Color(0xFFYOUR_COLOR),
            secondaryLight = Color(0xFFYOUR_COLOR),
            messageBubbleOwn = Color(0xFFYOUR_COLOR),
            messageBubbleOther = Color(0xFFYOUR_COLOR),
            accent = Color(0xFFYOUR_COLOR)
        )
    }
}
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π

–ê–Ω–∏–º–∞—Ü–∏–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ `ThemeSettingsScreen.kt`:

```kotlin
val scale by animateFloatAsState(
    targetValue = if (isSelected) 1.05f else 1f,
    animationSpec = spring(
        dampingRatio = Spring.DampingRatioMediumBouncy,
        stiffness = Spring.StiffnessLow
    )
)
```

## üì± –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –î–æ—Å—Ç—É–ø –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º —Ç–µ–º

1. –û—Ç–∫—Ä–æ–π—Ç–µ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ **"–¢–µ–º–∞"**
3. –í—ã–±–µ—Ä–∏—Ç–µ –∂–µ–ª–∞–µ–º—É—é —Ç–µ–º—É –∏–∑ —Å–µ—Ç–∫–∏
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ç–µ–º–Ω—É—é —Ç–µ–º—É –∏ —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–π —Ç–µ–º–µ
5. –ù–∞ Android 12+ –≤–∫–ª—é—á–∏—Ç–µ **Material You** –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ü–≤–µ—Ç–æ–≤

### –§—É–Ω–∫—Ü–∏–∏ UI

- **–°–µ—Ç–∫–∞ —Ç–µ–º**: 2 –∫–æ–ª–æ–Ω–∫–∏ —Å –ø—Ä–µ–≤—å—é –∫–∞–∂–¥–æ–π —Ç–µ–º—ã
- **–¶–≤–µ—Ç–æ–≤—ã–µ –∫—Ä—É–∂–∫–∏**: –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Ü–≤–µ—Ç–∞ —Ç–µ–º—ã
- **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤—ã–±–æ—Ä–∞**: –ì–∞–ª–æ—á–∫–∞ –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ–π —Ç–µ–º–µ
- **–ê–Ω–∏–º–∞—Ü–∏–∏**: –ü–ª–∞–≤–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ
- **–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏**: –ë—ã—Å—Ç—Ä–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–Ω–æ–π —Ç–µ–º–æ–π –∏ —Å–∏—Å—Ç–µ–º–Ω–æ–π —Ç–µ–º–æ–π

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ **DataStore Preferences**:

```kotlin
private val Context.themeDataStore: DataStore<Preferences> by preferencesDataStore(
    name = "theme_preferences"
)
```

–ö–ª—é—á–∏:
- `theme_variant`: Int (ordinal –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ç–µ–º—ã)
- `dark_theme`: Boolean
- `dynamic_color`: Boolean
- `system_theme`: Boolean

### Material Design 3

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–º –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å Material Design 3:

```kotlin
MaterialTheme(
    colorScheme = colorScheme,  // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å—Ö–µ–º–∞ —Ü–≤–µ—Ç–æ–≤
    typography = WMTypography,  // –ö–∞—Å—Ç–æ–º–Ω–∞—è —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏—è
    shapes = Shapes,            // –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ñ–æ—Ä–º—ã
    content = content
)
```

### CompositionLocal –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤

```kotlin
val LocalExtendedColors = staticCompositionLocalOf<ExtendedColors> { ... }

CompositionLocalProvider(
    LocalExtendedColors provides extendedColors
) {
    MaterialTheme { ... }
}
```

## üéì –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –ö–∞—Ä—Ç–æ—á–∫–∞ —Å —Ç–µ–º–æ–π

```kotlin
@Composable
fun ThemedCard() {
    val extendedColors = WMColors.extendedColors

    Card(
        colors = CardDefaults.cardColors(
            containerColor = MaterialTheme.colorScheme.surface
        ),
        modifier = Modifier
            .fillMaxWidth()
            .padding(16.dp)
    ) {
        Row(
            modifier = Modifier.padding(16.dp),
            verticalAlignment = Alignment.CenterVertically
        ) {
            // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ–Ω–ª–∞–π–Ω
            Box(
                modifier = Modifier
                    .size(12.dp)
                    .background(
                        color = extendedColors.onlineGreen,
                        shape = CircleShape
                    )
            )

            Spacer(modifier = Modifier.width(8.dp))

            Text(
                text = "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–Ω–ª–∞–π–Ω",
                style = MaterialTheme.typography.bodyMedium,
                color = MaterialTheme.colorScheme.onSurface
            )
        }
    }
}
```

### –ü—Ä–∏–º–µ—Ä 2: –ü—É–∑—ã—Ä—å —Å–æ–æ–±—â–µ–Ω–∏—è

```kotlin
@Composable
fun MessageBubble(text: String, isOwn: Boolean) {
    val extendedColors = WMColors.extendedColors
    val backgroundColor = if (isOwn) {
        extendedColors.messageBubbleOwn
    } else {
        extendedColors.messageBubbleOther
    }

    Box(
        modifier = Modifier
            .background(
                color = backgroundColor,
                shape = RoundedCornerShape(18.dp)
            )
            .padding(12.dp)
    ) {
        Text(
            text = text,
            color = if (isOwn) Color.White else MaterialTheme.colorScheme.onSurface
        )
    }
}
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π —Ç–µ–º—ã

```kotlin
@Composable
fun ThemeDebugInfo() {
    val themeState = rememberThemeState()

    Column {
        Text("Variant: ${themeState.variant.displayName}")
        Text("Dark mode: ${themeState.isDark}")
        Text("Dynamic: ${themeState.useDynamicColor}")
        Text("System: ${themeState.useSystemTheme}")
    }
}
```

### –°–±—Ä–æ—Å –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

```kotlin
val themeViewModel = rememberThemeViewModel()
themeViewModel.resetToDefaults()
```

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `StateFlow` –∏ `collectAsState()`
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ**: DataStore Preferences —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **–ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏**: Spring-–∞–Ω–∏–º–∞—Ü–∏–∏ —Å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- **–õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: ThemeManager –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç —Ç–µ–º
- [ ] –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ç–µ–º—ã —Å Color Picker
- [ ] –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–º–µ–Ω—ã —Ç–µ–º (–¥–Ω–µ–≤–Ω–∞—è/–Ω–æ—á–Ω–∞—è)
- [ ] –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–µ —Ç–µ–º—ã
- [ ] –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–æ–Ω—ã
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–µ–º –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ß–∞—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ WorldMates Messenger.

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è WorldMates Messenger

---

**–ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –∫—Ä–∞—Å–∏–≤—ã–º–∏ —Ç–µ–º–∞–º–∏!** üé®‚ú®
