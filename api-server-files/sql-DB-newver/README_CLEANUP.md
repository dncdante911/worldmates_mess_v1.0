# üóëÔ∏è –û—á–∏—â–µ–Ω–Ω—è –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤ —Ç–∞–±–ª–∏—Ü—å –ë–î

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–í—Å—å–æ–≥–æ —Ç–∞–±–ª–∏—Ü—å**: 284
- **–ì—Ä—É–ø –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤**: 119
- **–¢–∞–±–ª–∏—Ü—å –¥–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è**: 119 (–∑ –≤–µ–ª–∏–∫–∏—Ö –ª—ñ—Ç–µ—Ä `Wo_*`)
- **–¢–∞–±–ª–∏—Ü—å –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è**: 119 (–∑ –º–∞–ª–µ–Ω—å–∫–∏—Ö –ª—ñ—Ç–µ—Ä `wo_*`)

## üìÅ –§–∞–π–ª–∏

1. **`duplicates_report.txt`** - –¥–µ—Ç–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç –ø—Ä–æ –≤—Å—ñ –¥—É–±–ª—ñ–∫–∞—Ç–∏
2. **`cleanup_duplicates.sql`** - SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è
3. **`analyze_and_cleanup_duplicates.py`** - Python —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó

## ‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û!

### –ü–µ—Ä–µ–¥ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è–º:

1. **–°—Ç–≤–æ—Ä—ñ—Ç—å –±–µ–∫–∞–ø –ë–î:**
   ```bash
   mysqldump -u social -p socialhub > backup_$(date +%Y%m%d_%H%M%S).sql
   ```

2. **–ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –∑–≤—ñ—Ç:**
   ```bash
   cat duplicates_report.txt
   ```

3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç:**
   ```bash
   cat cleanup_duplicates.sql
   ```

## üöÄ –í–∏–∫–æ–Ω–∞–Ω–Ω—è –æ—á–∏—â–µ–Ω–Ω—è

### –ö—Ä–æ–∫ 1: –ë–µ–∫–∞–ø (–û–ë–û–í'–Ø–ó–ö–û–í–û!)
```bash
cd /home/user/worldmates_mess_v1.0/api-server-files/sql-DB-newver
mysqldump -u social -p socialhub > backup_before_cleanup_$(date +%Y%m%d).sql
```

### –ö—Ä–æ–∫ 2: –í–∏–∫–æ–Ω–∞–Ω–Ω—è SQL —Å–∫—Ä–∏–ø—Ç–∞
```bash
mysql -u social -p socialhub < cleanup_duplicates.sql
```

### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
```bash
# –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ –ë–î
mysql -u social -p socialhub

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü—å
SHOW TABLES LIKE 'Wo_%';  # –ú–∞—î –±—É—Ç–∏ –ø–æ—Ä–æ–∂–Ω—å–æ
SHOW TABLES LIKE 'wo_%';  # –ú–∞—î –ø–æ–∫–∞–∑–∞—Ç–∏ –≤—Å—ñ —Ç–∞–±–ª–∏—Ü—ñ

# –í–∏–π—Ç–∏
EXIT;
```

## üìù –©–æ –±—É–¥–µ –≤–∏–¥–∞–ª–µ–Ω–æ?

–°–∫—Ä–∏–ø—Ç –≤–∏–¥–∞–ª–∏—Ç—å **–í–°–Ü** —Ç–∞–±–ª–∏—Ü—ñ –∑ –≤–µ–ª–∏–∫–∏—Ö –ª—ñ—Ç–µ—Ä (`Wo_*`), –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:

- `Wo_Users` ‚Üí –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è `wo_users` ‚úÖ
- `Wo_Messages` ‚Üí –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è `wo_messages` ‚úÖ
- `Wo_GroupChat` ‚Üí –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è `wo_group_chat` ‚úÖ
- `Wo_Notifications` ‚Üí –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è `wo_notifications` ‚úÖ
- ... —ñ —Ç–∞–∫ –¥–∞–ª—ñ –¥–ª—è –≤—Å—ñ—Ö 119 —Ç–∞–±–ª–∏—Ü—å

## üîß –ß–æ–º—É —Å–∞–º–µ —Ç–∞–∫?

**–í –∫–æ–¥—ñ –ø—Ä–æ–µ–∫—Ç—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —Ç–∞–±–ª–∏—Ü—ñ –∑ –ú–ê–õ–ï–ù–¨–ö–ò–• –ª—ñ—Ç–µ—Ä:**

- ‚úÖ `api-server-files/api/v2/call_history.php` ‚Üí `wo_users`, `wo_group_chat`
- ‚úÖ `api-server-files/nodejs/` ‚Üí `wo_messages`, `wo_users`
- ‚úÖ PHP endpoints ‚Üí –≤—Å—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å `wo_*`

**–¢–∞–±–ª–∏—Ü—ñ –∑ –≤–µ–ª–∏–∫–∏—Ö –ª—ñ—Ç–µ—Ä (`Wo_*`) - —Ü–µ —Å—Ç–∞—Ä—ñ/–Ω–µ–∞–∫—Ç–∏–≤–Ω—ñ –¥—É–±–ª—ñ–∫–∞—Ç–∏.**

## üîÑ –†–µ–≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —Å–∫—Ä–∏–ø—Ç–∞

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∑ —ñ–Ω—à–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

```bash
python3 analyze_and_cleanup_duplicates.py
```

## ‚ùì –ü–∏—Ç–∞–Ω–Ω—è —ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

### Q: –ß–∏ –±–µ–∑–ø–µ—á–Ω–æ –≤–∏–¥–∞–ª—è—Ç–∏?
**A:** –¢–∞–∫, —è–∫—â–æ —î –±–µ–∫–∞–ø! –¢–∞–±–ª–∏—Ü—ñ `Wo_*` –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –≤ –∫–æ–¥—ñ.

### Q: –©–æ —è–∫—â–æ —â–æ—Å—å –ø—ñ–¥–µ –Ω–µ —Ç–∞–∫?
**A:** –í—ñ–¥–Ω–æ–≤—ñ—Ç—å –∑ –±–µ–∫–∞–ø—É:
```bash
mysql -u social -p socialhub < backup_before_cleanup_YYYYMMDD.sql
```

### Q: –°–∫—ñ–ª—å–∫–∏ –º—ñ—Å—Ü—è –∑–≤—ñ–ª—å–Ω–∏—Ç—å—Å—è?
**A:** –ó–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –¥–∞–Ω–∏—Ö –≤ —Ç–∞–±–ª–∏—Ü—è—Ö `Wo_*`. –ú–æ–∂–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏:
```sql
SELECT
    table_name,
    ROUND((data_length + index_length) / 1024 / 1024, 2) AS size_mb
FROM information_schema.TABLES
WHERE table_schema = 'socialhub'
  AND table_name LIKE 'Wo_%'
ORDER BY size_mb DESC;
```

## ‚úÖ –ü—ñ—Å–ª—è –æ—á–∏—â–µ–Ω–Ω—è

1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å Node.js —Å–µ—Ä–≤–µ—Ä
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ä–æ–±–æ—Ç—É –¥–æ–¥–∞—Ç–∫–∞
3. –Ø–∫—â–æ –≤—Å–µ –û–ö - –≤–∏–¥–∞–ª—ñ—Ç—å –±–µ–∫–∞–ø —á–µ—Ä–µ–∑ —Ç–∏–∂–¥–µ–Ω—å

---

**–°—Ç–≤–æ—Ä–µ–Ω–æ:** 2026-02-14
**–°–∫—Ä–∏–ø—Ç:** `analyze_and_cleanup_duplicates.py`
