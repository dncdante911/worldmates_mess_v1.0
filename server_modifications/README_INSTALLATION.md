# –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–∫—Ä–∞—â–µ–Ω–æ–≥–æ group_chat.php

## üìã –©–æ –±—É–ª–æ –ø–æ–∫—Ä–∞—â–µ–Ω–æ

1. **–î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è** - –≤—Å—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, –ø–æ–º–∏–ª–∫–∏ —Ç–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è –≤ –ª–æ–≥-—Ñ–∞–π–ª
2. **–ö—Ä–∞—â–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è** - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ–≤–∂–∏–Ω–∏ –Ω–∞–∑–≤–∏ –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é UTF-8 (–∫–∏—Ä–∏–ª–∏—Ü—è)
3. **–û–±—Ä–æ–±–∫–∞ –ø–æ—Ä–æ–∂–Ω—å–æ–≥–æ parts** - —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –≤–∏–±—Ä–∞–≤ —É—á–∞—Å–Ω–∏–∫—ñ–≤, –¥–æ–¥–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –≤—ñ–Ω —Å–∞–º
4. **–ó—Ä–æ–∑—É–º—ñ–ª—ñ –ø–æ–º–∏–ª–∫–∏** - –¥–µ—Ç–∞–ª—å–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —Ç–µ, —â–æ –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫
5. **–õ–æ–≥—É–≤–∞–Ω–Ω—è Wo_CreateGChat()** - —Ç–µ–ø–µ—Ä –±–∞—á–∏–º–æ —â–æ –ø–æ–≤–µ—Ä—Ç–∞—î —Ü—è —Ñ—É–Ω–∫—Ü—ñ—è

## üöÄ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –¥–ª—è –ª–æ–≥—ñ–≤

```bash
# –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞ —á–µ—Ä–µ–∑ SSH
ssh user@worldmates.club

# –°—Ç–≤–æ—Ä—ñ—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –¥–ª—è –ª–æ–≥—ñ–≤
mkdir -p /var/www/www-root/data/www/worldmates.club/api/v2/logs

# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É
chmod 777 /var/www/www-root/data/www/worldmates.club/api/v2/logs
```

### –ö—Ä–æ–∫ 2: –ë–µ–∫–∞–ø –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª—É

```bash
# –°—Ç–≤–æ—Ä—ñ—Ç—å –±–µ–∫–∞–ø –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª—É
cp /var/www/www-root/data/www/worldmates.club/api/v2/endpoints/group_chat.php \
   /var/www/www-root/data/www/worldmates.club/api/v2/endpoints/group_chat.php.backup
```

### –ö—Ä–æ–∫ 3: –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—É

```bash
# –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ñ–∞–π–ª –¥–ª—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è
nano /var/www/www-root/data/www/worldmates.club/api/v2/endpoints/group_chat.php
```

**–ó–Ω–∞–π–¥—ñ—Ç—å —Å–µ–∫—Ü—ñ—é:**
```php
if ($_POST['type'] == 'create') {
    $required_fields = array(
        'group_name',
        'parts'
    );
    // ... –≤–µ—Å—å –∫–æ–¥ –¥–æ –∫—ñ–Ω—Ü—è —Ü—ñ—î—ó —Å–µ–∫—Ü—ñ—ó
}
```

**–ó–∞–º—ñ–Ω—ñ—Ç—å –á–á –ø–æ–≤–Ω—ñ—Å—Ç—é** –Ω–∞ –∫–æ–¥ –∑ —Ñ–∞–π–ª—É `group_chat_create_improved.php`

### –ö—Ä–æ–∫ 4: –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –ó–±–µ—Ä–µ–∂—ñ—Ç—å —Ñ–∞–π–ª (Ctrl+O, Enter, Ctrl+X –≤ nano)

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å PHP
php -l /var/www/www-root/data/www/worldmates.club/api/v2/endpoints/group_chat.php

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å PHP-FPM (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
systemctl restart php-fpm
# –∞–±–æ
systemctl restart php7.4-fpm
# –∞–±–æ
systemctl restart php8.0-fpm
```

### –ö—Ä–æ–∫ 5: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ Android –¥–æ–¥–∞—Ç–∫—É

1. –ü–µ—Ä–µ—Å–æ–±–µ—Ä—ñ—Ç—å Android –¥–æ–¥–∞—Ç–æ–∫
2. –°–ø—Ä–æ–±—É–π—Ç–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –≥—Ä—É–ø—É –∑ –Ω–∞–∑–≤–æ—é "–¢–µ—Å—Ç–æ–≤–∞ –≥—Ä—É–ø–∞"
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥-—Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ:

```bash
# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
tail -f /var/www/www-root/data/www/worldmates.club/api/v2/logs/group_chat_debug.log

# –ê–±–æ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—ñ 50 —Ä—è–¥–∫—ñ–≤
tail -n 50 /var/www/www-root/data/www/worldmates.club/api/v2/logs/group_chat_debug.log
```

## üîç –©–æ —à—É–∫–∞—Ç–∏ –≤ –ª–æ–≥–∞—Ö

### –ü—Ä–∏ —É—Å–ø—ñ—à–Ω–æ–º—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –≥—Ä—É–ø–∏:
```
[2025-12-11 08:15:30] === CREATE GROUP CHAT REQUEST STARTED ===
[2025-12-11 08:15:30] POST data: {"type":"create","group_name":"–¢–µ—Å—Ç–æ–≤–∞ –≥—Ä—É–ø–∞","parts":"1","group_type":"group"}
[2025-12-11 08:15:30] User ID: 1
[2025-12-11 08:15:30] Group name length: 14 (name: –¢–µ—Å—Ç–æ–≤–∞ –≥—Ä—É–ø–∞)
[2025-12-11 08:15:30] Parts (raw): '1'
[2025-12-11 08:15:30] Users after processing: ["1"]
[2025-12-11 08:15:30] Calling Wo_CreateGChat with name='–¢–µ—Å—Ç–æ–≤–∞ –≥—Ä—É–ø–∞', type='group', users=["1"]
[2025-12-11 08:15:30] Wo_CreateGChat returned: 123 (type: integer)
[2025-12-11 08:15:30] SUCCESS: Group created with ID: 123
[2025-12-11 08:15:30] SUCCESS: Returning group data
[2025-12-11 08:15:30] === CREATE GROUP CHAT REQUEST FINISHED ===
```

### –ü—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ:
```
[2025-12-11 08:15:30] === CREATE GROUP CHAT REQUEST STARTED ===
[2025-12-11 08:15:30] ERROR: Wo_CreateGChat failed - returned: false
```

## üêõ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –Ø–∫—â–æ Wo_CreateGChat –ø–æ–≤–µ—Ä—Ç–∞—î false:

**–ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏—á–∏–Ω–∏:**
1. –ü—Ä–æ–±–ª–µ–º–∞ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö (–ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑'—î–¥–Ω–∞–Ω–Ω—è)
2. –¢–∞–±–ª–∏—Ü—è –¥–ª—è group chats –Ω–µ —ñ—Å–Ω—É—î
3. –ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –ø—Ä–∞–≤ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –¥–∞–Ω–∏—Ö
4. –§—É–Ω–∫—Ü—ñ—è Wo_CreateGChat –º–∞—î –±–∞–≥

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ MySQL –ª–æ–≥–∏
tail -f /var/log/mysql/error.log

# –ê–±–æ –ø–æ–¥–∏–≤—ñ—Ç—å—Å—è PHP error log
tail -f /var/log/php-fpm/www-error.log
```

### –Ø–∫—â–æ –ª–æ–≥–∏ –Ω–µ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É
ls -la /var/www/www-root/data/www/worldmates.club/api/v2/logs/

# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –ø—Ä–∞–≤–∞ —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ
chmod 777 /var/www/www-root/data/www/worldmates.club/api/v2/logs/
```

## üìû –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

–ü—ñ—Å–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è, –Ω–∞–¥—ñ—à–ª—ñ—Ç—å –º–µ–Ω—ñ:
1. –í–º—ñ—Å—Ç –ª–æ–≥-—Ñ–∞–π–ª—É –ø—ñ—Å–ª—è —Å–ø—Ä–æ–±–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥—Ä—É–ø–∏
2. –ß–∏ –∑'—è–≤–∏–ª–∞—Å—è –≥—Ä—É–ø–∞ –≤ –¥–æ–¥–∞—Ç–∫—É –∞–±–æ –≤—Å–µ —â–µ –ø–æ—Ä–æ–∂–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—å

–¢–æ–¥—ñ –∑–º–æ–∂–µ–º–æ –¥–∞–ª—ñ –¥—ñ–∞–≥–Ω–æ—Å—Ç—É–≤–∞—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É!
